dependencies {
    runtimeOnly(project(":storage"))

    implementation(project(":domain"))
    implementation(project(":common:error"))
    implementation(project(":common:enums"))

    implementation(project(":modules:logging"))
    implementation(project(":modules:monitoring"))
    implementation(project(":modules:local-cache"))


    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation "org.springdoc:springdoc-openapi-starter-webmvc-ui:${project.openApiVersion}"

    testImplementation("org.springframework.restdocs:spring-restdocs-mockmvc")
    asciidoctorExt("org.springframework.restdocs:spring-restdocs-asciidoctor")
}

def snippetsDir = file('build/generated-snippets')

test{
    outputs.dir snippetsDir
}

asciidoctor{
    inputs.dir snippetsDir
    configurations 'asciidoctorExt'

    doFirst {{
        delete file('src/main/resources/static/docs')
    }}
    dependsOn test
}
jar{
    enabled = false
}

bootJar{
    archiveFileName="linker.jar"
    copy({
       from file("build/docs/asciidoc")
       into file(("src/main/resources/static/docs"))
    })
    dependsOn asciidoctor
}
